(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,n){},57:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(30),a=n.n(c),s=n(6),i=n.n(s),o=n(3),u=n.n(o),l=n(7),j=n(4),p="https://snippets-manager-server.herokuapp.com",b=n(0),d=Object(r.createContext)();function h(e){var t=Object(r.useState)(void 0),n=Object(j.a)(t,2),c=n[0],a=n[1];function s(){return o.apply(this,arguments)}function o(){return(o=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat(p,"/auth/loggedIn"));case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){s()}),[]),Object(b.jsx)(d.Provider,{value:{user:c,getUser:s},children:e.children})}var O=d,f=n(11),x=n(2);n(57);var m=function(e){var t=e.message,n=e.clear;return Object(b.jsxs)("div",{className:"error-message",children:[Object(b.jsx)("p",{children:t}),Object(b.jsx)("button",{onClick:n,children:"Clear"})]})};n(29);var v=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(j.a)(a,2),o=s[0],d=s[1],h=Object(r.useState)(""),v=Object(j.a)(h,2),g=v[0],w=v[1],y=Object(r.useState)(null),S=Object(j.a)(y,2),N=S[0],C=S[1],k=Object(r.useContext)(O).getUser,D=Object(x.f)();function E(){return(E=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={email:n,password:o,passwordVerify:g},e.prev=2,e.next=5,i.a.post("".concat(p,"/auth/"),r);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data.errorMessage&&C(e.t0.response.data.errorMessage),e.abrupt("return");case 11:return e.next=13,k();case 13:D.push("/");case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(b.jsxs)("div",{className:"auth-form",children:[Object(b.jsx)("h2",{children:"Register a new account"}),N&&Object(b.jsx)(m,{message:N,clear:function(){return C(null)}}),Object(b.jsxs)("form",{className:"form",onSubmit:function(e){return E.apply(this,arguments)},children:[Object(b.jsx)("label",{htmlFor:"form-email",children:"Email"}),Object(b.jsx)("input",{id:"form-email",type:"email",value:n,onChange:function(e){return c(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"form-password",children:"Password"}),Object(b.jsx)("input",{id:"form-email",type:"password",value:o,onChange:function(e){return d(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"form-passwordVerify",children:"Verify password"}),Object(b.jsx)("input",{id:"form-passwordVerify",type:"password",value:g,onChange:function(e){return w(e.target.value)}}),Object(b.jsx)("button",{className:"btn-submit",type:"submit",children:"Register"}),Object(b.jsxs)("p",{children:["Already have an account? ",Object(b.jsx)(f.b,{to:"/login",children:"Login instead"})]})]})]})};var g=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(j.a)(a,2),o=s[0],d=s[1],h=Object(r.useState)(null),v=Object(j.a)(h,2),g=v[0],w=v[1],y=Object(r.useContext)(O).getUser,S=Object(x.f)();function N(){return(N=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={email:n,password:o},e.prev=2,e.next=5,i.a.post("".concat(p,"/auth/login"),r);case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),e.t0.response&&e.t0.response.data.errorMessage&&w(e.t0.response.data.errorMessage),e.abrupt("return");case 11:return e.next=13,y();case 13:S.push("/");case 14:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(b.jsxs)("div",{className:"auth-form",children:[Object(b.jsx)("h2",{children:"Log in"}),g&&Object(b.jsx)(m,{message:g,clear:function(){return w(null)}}),Object(b.jsxs)("form",{className:"form",onSubmit:function(e){return N.apply(this,arguments)},children:[Object(b.jsx)("label",{htmlFor:"form-email",children:"Email"}),Object(b.jsx)("input",{id:"form-email",type:"email",value:n,onChange:function(e){return c(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"form-password",children:"Password"}),Object(b.jsx)("input",{id:"form-email",type:"password",value:o,onChange:function(e){return d(e.target.value)}}),Object(b.jsx)("button",{className:"btn-submit",type:"submit",children:"Log in"}),Object(b.jsxs)("p",{children:["Don't have an account yet? ",Object(b.jsx)(f.b,{to:"/register",children:"Register instead"})]})]})]})},w=n(32);n(66);var y=function(e){var t=e.snippet,n=e.getSnippets,r=e.editSnippet;function c(){return(c=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this snippet?")){e.next=4;break}return e.next=3,i.a.delete("".concat(p,"/snippet/").concat(t._id));case 3:n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("div",{className:"snippet",children:[t.title&&Object(b.jsx)("h2",{className:"title",children:t.title}),t.description&&Object(b.jsx)("p",{className:"description",children:t.description}),t.code&&Object(b.jsx)("pre",{className:"code",children:Object(b.jsx)("code",{children:t.code})}),Object(b.jsx)("button",{className:"btn-edit",onClick:function(){return r(t)},children:"Edit"}),Object(b.jsx)("button",{className:"btn-delete",onClick:function(){return c.apply(this,arguments)},children:"Delete"})]})};n(67);var S=function(e){var t=e.getSnippets,n=e.setSnippetEditorOpen,c=e.editSnippetData,a=Object(r.useState)(""),s=Object(j.a)(a,2),o=s[0],d=s[1],h=Object(r.useState)(""),O=Object(j.a)(h,2),f=O[0],x=O[1],v=Object(r.useState)(""),g=Object(j.a)(v,2),w=g[0],y=g[1],S=Object(r.useState)(null),N=Object(j.a)(S,2),C=N[0],k=N[1];function D(){return(D=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r={title:o||void 0,description:f||void 0,code:w||void 0},e.prev=2,c){e.next=8;break}return e.next=6,i.a.post("".concat(p,"/snippet/"),r);case 6:e.next=10;break;case 8:return e.next=10,i.a.put("".concat(p,"/snippet/").concat(c._id),r);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(2),e.t0.response&&e.t0.response.data.errorMessage&&k(e.t0.response.data.errorMessage),e.abrupt("return");case 16:t(),E();case 18:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function E(){n(!1),y(""),x(""),d("")}return Object(r.useEffect)((function(){c&&(d(c.title?c.title:""),x(c.description?c.description:""),y(c.code?c.code:""))}),[c]),Object(b.jsxs)("div",{className:"snippet-editor",children:[C&&Object(b.jsx)(m,{message:C,clear:function(){return k(null)}}),Object(b.jsxs)("form",{className:"form",onSubmit:function(e){return D.apply(this,arguments)},children:[Object(b.jsx)("label",{htmlFor:"editor-title",children:"Title"}),Object(b.jsx)("input",{id:"editor-title",type:"text",value:o,onChange:function(e){return d(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"editor-description",children:"Description"}),Object(b.jsx)("input",{id:"editor-description",type:"text",value:f,onChange:function(e){return x(e.target.value)}}),Object(b.jsx)("label",{htmlFor:"editor-code",children:"Code"}),Object(b.jsx)("textarea",{id:"editor-code",value:w,onChange:function(e){return y(e.target.value)}}),Object(b.jsx)("button",{className:"btn-save",type:"submit",children:"Save"}),Object(b.jsx)("button",{className:"btn-cancel",type:"button",onClick:E,children:"Cancel"})]})]})};n(68);var N=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(j.a)(a,2),o=s[0],d=s[1],h=Object(r.useState)(null),x=Object(j.a)(h,2),m=x[0],v=x[1],g=Object(r.useContext)(O).user;function N(){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat(p,"/snippet/"));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){v(e),d(!0)}return Object(r.useEffect)((function(){g?N():c([])}),[g]),Object(b.jsxs)("div",{className:"home",children:[!o&&g&&Object(b.jsx)("button",{className:"btn-editor-toggle",onClick:function(){return d(!0)},children:"Add snippet"}),o&&Object(b.jsx)(S,{setSnippetEditorOpen:d,getSnippets:N,editSnippetData:m}),n.length>0?function(){var e=Object(w.a)(n);return(e=e.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))).map((function(e,t){return Object(b.jsx)(y,{snippet:e,getSnippets:N,editSnippet:k},t)}))}():g&&Object(b.jsx)("p",{className:"no-snippets-msg",children:"No snippets have been added yet"}),null===g&&Object(b.jsxs)("div",{className:"no-user-message",children:[Object(b.jsx)("h2",{children:"Welcome to Snippet manager"}),Object(b.jsx)(f.b,{to:"/register",children:"Register here"}),Object(b.jsx)("p",{className:"no-snippets-msg",children:"Best viewed in Chrome. This site requires a browser that enables third party cookies."})]})]})};n(69);var C=function(){var e=Object(r.useContext)(O),t=e.user,n=e.getUser;function c(){return(c=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("".concat(p,"/auth/logOut"));case 2:return e.next=4,n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)("div",{className:"navbar",children:[Object(b.jsx)(f.b,{to:"/",children:Object(b.jsx)("h1",{children:"Snippet Manager"})}),null===t?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f.b,{to:"/login",children:"Log in"}),Object(b.jsx)(f.b,{to:"/register",children:"Register"})]}):t&&Object(b.jsx)("button",{className:"btn-logout",onClick:function(){return c.apply(this,arguments)},children:"Log out"})]})};var k=function(){return Object(b.jsxs)(f.a,{children:[Object(b.jsx)(C,{}),Object(b.jsxs)(x.c,{children:[Object(b.jsx)(x.a,{exact:!0,path:"/",children:Object(b.jsx)(N,{})}),Object(b.jsx)(x.a,{path:"/login",children:Object(b.jsx)(g,{})}),Object(b.jsx)(x.a,{path:"/register",children:Object(b.jsx)(v,{})})]})]})};n(70);i.a.defaults.withCredentials=!0;var D=function(){return Object(b.jsx)(h,{children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(k,{})})})};a.a.render(Object(b.jsx)(D,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.d71a734c.chunk.js.map